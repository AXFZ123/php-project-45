#!/usr/bin/env php

<?php

require_once __DIR__ . '/../vendor/autoload.php';

use function cli\line;
use function cli\prompt;

$questionsNumber = 3;
$randInterval = [1, 99];
$answerValues = ['yes', 'no'];

line('Welcome to the Brain Game!');
$name = prompt('May I have your name?');
line("Hello, %s!", $name);
line('Answer "yes" if the number is even, otherwise answer "no".');
for ($i = 0; $i < $questionsNumber; $i++) {
    $number = rand($randInterval[0], $randInterval[1]);
    $correctAnswer = $answerValues[$number & 1];
    line('Question: %d', $number);
    $answer = prompt('Your answer');
    if ((! in_array($answer, $answerValues)) || $answer !== $correctAnswer) {
        line("'{$answer}' is wrong answer ;(. Correct answer was '{$correctAnswer}'.");
        line("Let's try again, Bill!");
        exit();
    } else {
        line("Correct!");
    }
}
line("Congratulations, {$name}!");
